于是深入分析业务发现登录发下有一下几种：
1. 一方登录，主要是账户（用户名，手机，邮箱）与密码和验证码登录方式
2. 二方登录，因为公司内部有多套登录系统，通过拉取token进行去其他登录系统认证
3. 三方登录，使用其他平台的登录如微信，QQ，支付宝的登录系统进行登录
4. 平台登录，用户使用小程序登录。有微信小程序，企业微信小程序


深入分析业务发现用户登录之后有成功与失败两个状态：

登录成功之后
登录注册：三方登录与平台登录的用户登录，登录成功发现用户没有在我们系统注册，于是请求三方或者平台用户信息进行注册
获得用户信息：登录成功之后，必须获得用户信息
获得用户权限：内部系统需要权限认证，成功之后获取用户对应系统的权限信息
获得组织信息：成功之后不同组织的用户，在页面会进入不同组织的视图，同时在操作的时候需要绑定组织id，所以需要用去用户组织信息
登录异常消除：用户之前登录失败会记录登录失败次数，如果次数过多就拒绝登录
黑白名单：有一些用户进去的公司的黑用户名单里面，是拒绝用户登录的
登录日志记录：每个用户登录与退出都会记录
token创建：有多种token创建方式包括jwt，可以把通过放到header，cookie等地方，同时支持jwt与redis缓存操作
登录与注册成功广播：其他系统在用户成功之后需要进行一些业务操作，登录系统需要通知到它们

登录失败之后
登录异常记录：用户登录失败会进行记录，操作一定次数会限制用户在当天或一定时间内不能登录。支持用户名与client IP限制