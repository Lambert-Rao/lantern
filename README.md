# lantern
# 要支持 电子的异步
# 认证，鉴权，两个不同的动作
# 
用户，公司，系统，部门，区域，
1. 登录的时候，可以得到公司，系统，
2. 用户登录，直接指定部门，区域？ 还是可以选择。
3. 如何切换 公司，部门，区域。系统可以直接跳转。
   1. 如果多系统登录怎么办
   2. 多系统同时有一个接口怎么处理
      1. 是代理下，六边形
      2. 还是传递系统id
   3. 如果认证系统，尤其是在网管层。通过端口？还是证书
      1. 证书与端口绑定哈。
      2. 域名可以绑定 ip，dns
      3. ip 与lvs
      4. lvs 与后端的端口
      5. 证书与端口绑定，与域名绑定
      6. 端口与空间绑定
      7. 空间与项目绑定
      8. 是不是只需要认证绑定就ok了
      9. 隔离系统之间的数据，认证数据。
         1. 每个系统使用不同的数据地址。
         2. 当前存储进行识别与认证
         3. 预计登录A系统，绕过了登录了B系统，得到的只有B系统的权限，无法等到A系统的权限。
            1. 调用A系统接口是不存在权限的
            2. 如果用户登录行为被欺骗，怎么办
               3. 短信认证
               4. 动态码认证
               5. 登录行为被拦截
                  6. 全称 tsl
         4. 用户是否可以登录所有的系统
            1.互联网 
      10. 是否可以在建立 tsl的时候识别域名

1. 本地缓存
	 1. 启动的时候全部加载
	 2. 登录之后，加载个人
	 3. etcd全部加载
	 4. 定时清楚，然后加载
2. 直接查询db
3. 调用远程接口
4. 请求redis，

权限更新如何处理


资源拥有者（拥有有那些最基础资源，有默认角色）
1. 用户
2. 用户组 
3. 部门
   1. 不同部门，职位权限不一样
      1. 部门（不同） -> 职位（相同） -> 角色（可以相同，也可以不同） -> 资源
   2. 部门拥有那些资源
4. 职位
5. 团队
6. 角色
7. 资源（资源的角色，角色有权限）
资源类型
7. 角色
8. 接口
9. 菜单。多维度菜单
10. 视图
11. 字段
12. 字段范围
13. 字段内容
14. 目录，文件权限
    1. 上传
    2. 下载
    3. 删除
    4. 查看
    5. 上传者权限
15. 网络地址或则mac
16. 支持正则表达式或则抽象匹配，亲和与反亲和。禁止的角色与资源，个人禁止，还是角色禁止，还是
PS：职权与区域双维度，问题
17. 多匹配

18. 开启 ip，mac鉴权
19. 默认开启 角色，接口鉴权。
20. 开启 区域鉴权。作为前端展示
21. 开启 部门鉴权。作为前端展示
22. 

23. 是不是需要系统，部门，区域，拥有不同权限
24. 是直接绑定
25. 角色通用，不同角色在不同系统，区域，部门是不一样的？
26. 再次申请？
27. 三种模式，
    6. 一种角色与资源通用，被部门与区域限制
    7. 一种角色通用，资源不通用
    8. 都不通用，重申申请

视图是
1. 后端渲染
2. 前端渲染
3. 预先渲染

获得用户
1. 所有接口数据
2. 所有 需要鉴权的数据

数据获得操作
1. 从数据库。登录的时候，修改权限强行退出
2. 从本地缓存（+etcd），redis。
   3. 

修改
1. 全部删除，然后刷新

技术栈
1. mybatis，sjdbc
2. 


权限审计